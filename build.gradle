plugins {
    id 'java'
}

group 'codesquad'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'
    testImplementation 'org.junit.jupiter:junit-jupiter-params:5.4.2'

    implementation 'ch.qos.logback:logback-classic:1.2.3'
    testImplementation 'org.assertj:assertj-core:3.16.1'


    // h2
    implementation 'com.h2database:h2:1.4.200'
}

test {
    useJUnitPlatform()
}

ext {
    staticDirPath = "${projectDir}/src/main/resources/static"
    templatesDirPath = "${projectDir}/src/main/resources/templates"
}

task generatePropertiesFile {
    doLast {
        def file = file("${buildDir}/generated-resources/project.properties")
        file.parentFile.mkdirs()
        file.text = """
            static.dir=${staticDirPath}
            templates.dir=${templatesDirPath}
        """.stripIndent()
    }
}

processResources.dependsOn generatePropertiesFile

sourceSets.main.resources.srcDir "${buildDir}/generated-resources"
